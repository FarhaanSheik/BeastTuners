@model BeastTuners.Models.CheckoutViewModel

@{
    ViewData["Title"] = "Checkout";
}

<div class="container py-5">
    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-danger text-white">
                    <h4 class="mb-0"><i class="fas fa-shopping-bag me-2"></i>Checkout</h4>
                </div>
                <div class="card-body">
                    <form asp-action="Checkout" method="post">
                        @Html.AntiForgeryToken()

                        <h5 class="mb-4"><i class="fas fa-user me-2"></i>Customer Information</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="FirstName" class="form-label"></label>
                                <input asp-for="FirstName" class="form-control" />
                                <span asp-validation-for="FirstName" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="LastName" class="form-label"></label>
                                <input asp-for="LastName" class="form-control" />
                                <span asp-validation-for="LastName" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="Email" class="form-label"></label>
                                <input asp-for="Email" class="form-control" />
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="Phone" class="form-label"></label>
                                <input asp-for="Phone" class="form-control" />
                                <span asp-validation-for="Phone" class="text-danger"></span>
                            </div>
                        </div>

                        <h5 class="mb-4 mt-4"><i class="fas fa-truck me-2"></i>Shipping Address</h5>
                        <div class="mb-3">
                            <label asp-for="Address" class="form-label"></label>
                            <input asp-for="Address" class="form-control" placeholder="Street address" />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="City" class="form-label"></label>
                                <input asp-for="City" class="form-control" />
                                <span asp-validation-for="City" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="PostalCode" class="form-label"></label>
                                <input asp-for="PostalCode" class="form-control" />
                                <span asp-validation-for="PostalCode" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Country" class="form-label"></label>
                            <select asp-for="Country" class="form-select">
                                <option value="New Zealand">New Zealand</option>
                                <option value="Australia">Australia</option>
                                <option value="Other">Other</option>
                            </select>
                            <span asp-validation-for="Country" class="text-danger"></span>
                        </div>

                        <h5 class="mb-4 mt-4"><i class="fas fa-credit-card me-2"></i>Payment & Shipping</h5>
                        <div class="mb-3">
                            <label asp-for="ShippingMethod" class="form-label"></label>
                            <select asp-for="ShippingMethod" class="form-select">
                                <option value="Standard">Standard Shipping ($15.00) - 3-5 business days</option>
                                <option value="Express">Express Shipping ($25.00) - 1-2 business days</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label asp-for="PaymentMethod" class="form-label"></label>
                            <select asp-for="PaymentMethod" class="form-select">
                                <option value="Credit Card">Credit Card</option>
                                <option value="PayPal">PayPal</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label asp-for="OrderNotes" class="form-label"></label>
                            <textarea asp-for="OrderNotes" class="form-control" rows="3" placeholder="Special delivery instructions or notes about your order..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-success btn-lg w-100 mt-4">
                            <i class="fas fa-lock me-2"></i>Complete Order - @Model.Total.ToString("C")
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow-sm">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="fas fa-receipt me-2"></i>Order Summary</h5>
                </div>
                <div class="card-body">
                    <div class="order-items">
                        @foreach (var item in Model.CartItems)
                        {
                            <div class="d-flex justify-content-between mb-3 pb-2 border-bottom">
                                <div>
                                    <strong>@item.PartName</strong>
                                    <br>
                                    <small class="text-muted">Qty: @item.Quantity × @item.Price.ToString("C")</small>
                                </div>
                                <div class="text-end">
                                    <div>@((item.Price * item.Quantity).ToString("C"))</div>
                                </div>
                            </div>
                        }
                    </div>

                    <hr>

                    <div class="d-flex justify-content-between mb-2">
                        <span>Subtotal:</span>
                        <span>@Model.Subtotal.ToString("C")</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Shipping:</span>
                        <span>@Model.Shipping.ToString("C")</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>GST (15%):</span>
                        <span>@Model.Tax.ToString("C")</span>
                    </div>

                    <hr>

                    <div class="d-flex justify-content-between mb-3">
                        <strong>Total:</strong>
                        <strong class="text-danger">@Model.Total.ToString("C")</strong>
                    </div>

                    <!-- Security Features -->
                    <div class="alert alert-info mt-3">
                        <h6 class="alert-heading"><i class="fas fa-shield-alt me-2"></i>Secure Checkout</h6>
                        <p class="small mb-0">Your payment information is encrypted and secure.</p>
                    </div>
                </div>
            </div>

            <!-- Support Information -->
            <div class="card mt-3">
                <div class="card-body">
                    <h6><i class="fas fa-headset me-2"></i>Need Help?</h6>
                    <p class="small mb-1">Email: support@beasttuners.com</p>
                    <p class="small mb-1">Phone: (0800) 123-4567</p>
                    <p class="small mb-0">Hours: Mon-Fri 8AM-6PM</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <style>
        .card {
            border: none;
            border-radius: 10px;
        }

        .card-header {
            border-radius: 10px 10px 0 0 !important;
        }

        .form-control:focus, .form-select:focus {
            border-color: #dc3545;
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }

        .border-bottom {
            border-color: #e9ecef !important;
        }

        .alert-info {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            border: 1px solid #bee5eb;
        }
    </style>
}